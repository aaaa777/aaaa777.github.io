---
layout: post
title: "自作キーボードの夢"
description: desc
hero_image: /img/screenshot-2023-11-20 215143.png
image: /img/screenshot-2023-11-20 215143.png
hero_height: is-large
hero_darken: true
tags:
 - blog
 - dialy
# - draft
---

漠然と自作キーボードを作りたい欲があるので、そのメモ。

## 作りたいもの

今持ってる10キーレスタイプか、左右分離型のキーボードを作りたい。
最初から自作するの怖いので練習としてDigisparkを使ったUSBデバイスの自作するのもありかも。
それでうまくいったらキーキャップに印刷してキャラキーボード作って・・・妄想だけは一丁前に捗る。

どうでもいいけど最近は痛〇〇って言わないよね、オタク文化に理解がある時代ですな。でも痛車はまだ痛車って言われてる気がする。

## 作り方

キーボードを自作するならマイコンを利用するのが一般的みたい。
ラズパイみたいなシングルボードコンピュータでも出来るんだけど高価だし遅延も大きい。

簡単そうなのはArduinoとかのAVR系のマイコンでV-USBを使ってUSBデバイスを作る方法。
以前BadUSBについて調べてた時によく見かけたのでノウハウも汎用性も高いのだと思う。
自分はこの方法で作ってみようと思う。

## チップ

候補

#### ATmega32U4

自作キーボード界隈の定番らしい。
Arduino Studioで開発できるので簡単そう。

#### ATtiny85

自作USBデバイス入門の定番。
Digisparkという数百円の小型ボードで遊べるので敷居が低い。
AVRマイコンでV-USBを使ったUSBデバイスの作り方が学べると思う。
難点は使えるピン数が少ないので直接キーマトリクスを接続できないこと。
USBに信号線を使うとI2CやSPI一つ分しか余剰のピンがないので、キーマトリクスを変換したI2Cデバイスを使ったり別のマイコンを選ぶ必要がある。

## 基盤

最近は個人でプリント基板を発注できちゃうので、自作キーボード界隈では基板設計から解説する記事も多い。
基盤の発注はElecrowとかJLCPCBとかが多い。
ちなみにどの記事も自作キーボード設計入門という書籍を強くお勧めしているので自分も購入するつもり。

参考：

[自作キーボードの基板設計は意外とどうにかなる話 - メモ帳DPA](https://de0.hatenablog.com/entry/2021/12/03/071653)


## 電源

持ち運びと据え置きを兼用するために出来ればUSB給電とワイヤレスの両方を搭載したい。
コイン電池や単三電池を使う場合はDCDCコンバータだけで良い。
リチウムバッテリーを使用する場合は充電回路とDCDCコンバータが必要になる。
充電回路とコンバータ一体型のモジュールも探せばあるだろう。
入手性の良い18650を使えるようになればベスト。

参考：

[アマゾンで買った Li電池充電器 と DCDCコンバータ で5Vと3.3V電源を作る - 「えだまめ」しているラズパイ](https://greensoybean.hatenablog.com/entry/2022/03/25/%E3%82%A2%E3%83%9E%E3%82%BE%E3%83%B3%E3%81%A7%E8%B2%B7%E3%81%A3%E3%81%9F_Li%E9%9B%BB%E6%B1%A0%E5%85%85%E9%9B%BB%E5%99%A8_%E3%81%A8_DCDC%E3%82%B3%E3%83%B3%E3%83%90%E3%83%BC%E3%82%BF_%E3%81%A75V)

## 筐体

トッププレートとボトムプレートの間に基盤を挟み込む構造が一般的。
トッププレートは基盤を上から保護しスイッチを支える役割を持つ。
ボトムプレートは基盤を下から保護し打鍵感を良くする。
材質候補は3Dプリント、プラ、アクリル板、木材、MDF、金属等。
行くとこまで行くとアルミCNC削り出しに手を出すらしい。怖い。


## 印刷

キーキャップに印刷する場合は昇華転写やUV転写がよく使われるが、UV転写は高いので昇華転写にしようと思う。
昇華転写はインクジェットプリンタで印刷した紙に熱を加えてインクを蒸発させて転写する方法で、外部にデータを渡して転写紙を作ってもらうことも可能。
転写は一つ一つ行うため時間が掛かるがアイロンでできる。

参考：

[日本語配列　キーキャップへの昇華印刷、染色 \| 甘えん坊将軍の自転車&ガジェットログ](https://ameblo.jp/calappappa/entry-12799036505.html)
